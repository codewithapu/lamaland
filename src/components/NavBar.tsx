import Head from 'next/head'
import Image from 'next/image'
import styles from '@/styles/components/NavBar.module.scss'
import Link from 'next/link'

import { useRouter } from 'next/router';
import React from 'react';

import { useSession, signOut, signIn } from 'next-auth/react'


const NavBar: React.FC = () => {
  const defaultAvatar = '/avatar.webp';

  const { data: session } = useSession();
  const router = useRouter();

  const handleAvatarClick = () => {
    // If user is not logged in, redirect to sign-in page
    if (!session) {
      signIn()
    }
  }


  const handleCopy = async (event: React.MouseEvent<HTMLDivElement>) => {
    const target = event.currentTarget as HTMLDivElement;

    if (!target) return;

    try {
      await navigator.clipboard.writeText(target.textContent || '');
      console.log('Content copied to clipboard!');
    } catch (err) {
      console.error('Failed to copy text: ', err);
    }
  };

  return (
    <>
      <Head>
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div className={styles.NavBar}>
        <div className={styles.Top}>

          <div className={styles.User} onClick={handleAvatarClick} style={{ cursor: "pointer" }}>

            {session?.user?.image ? (
              // If logged in, display the user's image
              <Link href="/profile" className={styles.Profile}>
                <Image
                alt='User Avatar'
                  className={styles.Avatar}
                  src={session.user.image || defaultAvatar}
                  width={45}
                  height={45}
                />
              </Link>
            ) : (
              // If not logged in, display a default avatar

              <Image
                className={styles.Avatar}
                src="/avatar.webp"
                alt="Default avatar"
                style={{ borderRadius: '10rem'}}
                width={45}
                height={45}
              />
            )}

          </div>


          <Link href="/" className={styles.LogoLink}>

            <svg className={styles.Logo} xmlns="http://www.w3.org/2000/svg" width="87" height="59" viewBox="0 0 87 59" fill="none">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M46.1836 40V23.7591C46.7308 24.4753 47.3679 25.2528 48.0945 26.0727C50.8783 29.2141 55.0455 33.0564 60.6538 36.5077L63.4633 31.9423C58.3505 28.796 54.58 25.3088 52.1064 22.5175C50.8682 21.1203 49.9722 19.9169 49.4031 19.0415L49.3556 18.9681H63.5039V13.6075H46.1836V0H40.8231V13.6075H23.5039V18.9681H37.4432L37.3957 19.0416C36.8266 19.917 35.9306 21.1204 34.6924 22.5176C32.2188 25.3089 28.4483 28.7961 23.3355 31.9424L26.145 36.5078C31.7533 33.0565 35.9205 29.2142 38.7043 26.0729C39.5249 25.1469 40.2313 24.275 40.8231 23.4844V40H46.1836ZM54.5185 11.9101C56.48 9.27717 57.6284 7.12382 58.2935 5.50042C58.9283 3.95061 59.1729 2.75845 59.1729 2.06185H53.8124C53.8124 2.04643 53.8124 2.03318 53.8125 2.02213C53.8127 1.99447 53.8127 1.98052 53.8113 1.98038C53.8099 1.98022 53.807 1.99435 53.801 2.02285C53.7722 2.16142 53.6724 2.63974 53.333 3.46839C52.8578 4.62835 51.9446 6.39232 50.2197 8.70761L54.5185 11.9101ZM36.7861 8.70761C35.0613 6.39232 34.148 4.62835 33.6729 3.46839C33.3334 2.63977 33.2337 2.16145 33.2048 2.02287C33.1989 1.99436 33.1959 1.98022 33.1945 1.98038C33.1931 1.98052 33.1932 1.99447 33.1934 2.02213C33.1934 2.03318 33.1935 2.04643 33.1935 2.06185H27.833C27.833 2.75844 28.0775 3.95061 28.7124 5.50042C29.3774 7.12382 30.5259 9.27717 32.4873 11.9101L36.7861 8.70761ZM0.857422 49.3149V58.9999H6.96742V57.2449H2.87242V49.3149H0.857422ZM11.8278 49.3149L8.5518 58.9999H10.7358L11.3858 57.0239H14.9348L15.5848 58.9999H17.7818L14.5058 49.3149H11.8278ZM14.3758 55.2689H11.9448L13.1656 51.5322L14.3758 55.2689ZM20.0883 58.9999V49.3149H22.0383L25.2037 53.5128L28.2783 49.3149H30.2283V58.9999H28.2133V52.759L25.2883 56.5299H25.0283L22.1033 52.6229V58.9999H20.0883ZM35.8067 49.3149L32.5307 58.9999H34.7147L35.3647 57.0239H38.9137L39.5637 58.9999H41.7607L38.4847 49.3149H35.8067ZM38.3547 55.2689H35.9237L37.1445 51.5322L38.3547 55.2689ZM47.7031 58.9999V49.3149H49.7181V57.2449H53.8131V58.9999H47.7031ZM58.6735 49.3149L55.3975 58.9999H57.5815L58.2315 57.0239H61.7805L62.4305 58.9999H64.6275L61.3515 49.3149H58.6735ZM61.2215 55.2689H58.7905L60.0113 51.5322L61.2215 55.2689ZM66.934 58.9999V49.3149H68.481L72.849 55.0698V49.3149H74.864V58.9999H73.304L68.949 53.1157V58.9999H66.934ZM77.8824 49.3149V58.9999H81.0414C82.0901 58.9999 83.0001 58.7919 83.7714 58.3759C84.5428 57.9599 85.1408 57.3879 85.5654 56.6599C85.9901 55.9233 86.2024 55.0869 86.2024 54.1509C86.2024 53.2149 85.9901 52.3829 85.5654 51.6549C85.1408 50.9269 84.5428 50.3549 83.7714 49.9389C83.0001 49.5229 82.0901 49.3149 81.0414 49.3149H77.8824ZM81.0934 57.2449H79.8974V51.0699H81.0934C81.7261 51.0699 82.2721 51.1956 82.7314 51.4469C83.1908 51.6983 83.5461 52.0536 83.7974 52.5129C84.0574 52.9723 84.1874 53.5183 84.1874 54.1509C84.1874 54.7749 84.0574 55.3209 83.7974 55.7889C83.5461 56.2483 83.1908 56.6079 82.7314 56.8679C82.2721 57.1193 81.7261 57.2449 81.0934 57.2449Z" fill="black" />
            </svg>

          </Link>

          <div className={styles.CartBtn}>
            <Link href="/cart" className={styles.Cart}>
              <svg xmlns="http://www.w3.org/2000/svg" width="23" height="25" viewBox="0 0 23 25" fill="none">
                <path d="M5.60057 21.9103C5.60057 22.4386 5.75724 22.9551 6.05075 23.3943C6.34426 23.8336 6.76145 24.176 7.24955 24.3782C7.73764 24.5803 8.27473 24.6332 8.79289 24.5302C9.31105 24.4271 9.78701 24.1727 10.1606 23.7991C10.5342 23.4256 10.7886 22.9496 10.8916 22.4314C10.9947 21.9133 10.9418 21.3762 10.7396 20.8881C10.5375 20.4 10.1951 19.9828 9.75581 19.6893C9.31653 19.3958 8.80008 19.2391 8.27177 19.2391C7.56354 19.2398 6.88453 19.5215 6.38374 20.0223C5.88295 20.5231 5.60129 21.2021 5.60057 21.9103ZM9.31253 21.9103C9.31253 22.1162 9.25149 22.3174 9.13713 22.4885C9.02277 22.6597 8.86022 22.7931 8.67005 22.8718C8.47988 22.9506 8.27061 22.9712 8.06873 22.9311C7.86684 22.8909 7.68139 22.7918 7.53584 22.6462C7.39029 22.5007 7.29116 22.3152 7.25101 22.1133C7.21085 21.9115 7.23146 21.7022 7.31023 21.512C7.389 21.3219 7.5224 21.1593 7.69355 21.0449C7.8647 20.9306 8.06592 20.8695 8.27177 20.8695C8.54757 20.8703 8.81188 20.9801 9.0069 21.1752C9.20193 21.3702 9.31181 21.6345 9.31253 21.9103Z" fill="#111111" />
                <path d="M16.7908 21.9103C16.7908 22.4386 16.9474 22.9551 17.2409 23.3943C17.5345 23.8336 17.9516 24.176 18.4397 24.3782C18.9278 24.5803 19.4649 24.6332 19.9831 24.5302C20.5013 24.4271 20.9772 24.1727 21.3508 23.7991C21.7244 23.4256 21.9788 22.9496 22.0818 22.4314C22.1849 21.9133 22.132 21.3762 21.9298 20.8881C21.7277 20.4 21.3853 19.9828 20.946 19.6893C20.5067 19.3958 19.9903 19.2391 19.462 19.2391C18.7537 19.2398 18.0747 19.5215 17.5739 20.0223C17.0732 20.5231 16.7915 21.2021 16.7908 21.9103ZM20.5027 21.9103C20.5027 22.1162 20.4417 22.3174 20.3273 22.4885C20.213 22.6597 20.0504 22.7931 19.8602 22.8718C19.6701 22.9506 19.4608 22.9712 19.2589 22.9311C19.057 22.8909 18.8716 22.7918 18.726 22.6462C18.5805 22.5007 18.4814 22.3152 18.4412 22.1133C18.401 21.9115 18.4217 21.7022 18.5004 21.512C18.5792 21.3219 18.7126 21.1593 18.8838 21.0449C19.0549 20.9306 19.2561 20.8695 19.462 20.8695C19.7378 20.8703 20.0021 20.9801 20.1971 21.1752C20.3921 21.3702 20.502 21.6345 20.5027 21.9103Z" fill="#111111" />
                <path d="M4.86685 18.3261H23V16.6957H6.32065L6.15217 15.2364L21.3696 13.6359L22.6413 3.95652H4.85598L4.40217 0H0V1.63044H2.94837L4.86685 18.3261ZM20.7908 5.58696L19.9239 12.1495L5.97826 13.6168L5.05435 5.58696H20.7908Z" fill="#111111" />
              </svg>
            </Link>
          </div>

        </div>

        <div className={styles.Bottom}>
          <div className={styles.Notification}>GET 10% OFF USE COUPON CODE <div onClick={handleCopy} className={styles.Code}>
            LAMALAND10
          </div></div>

        </div>


        <button className={styles.Btn}>order now</button>
      </div>

    </>
  )
}

export default NavBar;